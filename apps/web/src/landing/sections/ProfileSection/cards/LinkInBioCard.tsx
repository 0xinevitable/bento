import styled from '@emotion/styled';
import { motion } from 'framer-motion';
import { useTranslation } from 'next-i18next';
import Image from 'next/image';

import illustOne from '@/assets/illusts/link-in-bio-1.png';
import illustTwo from '@/assets/illusts/link-in-bio-2.png';
import background from '@/assets/illusts/link-in-bio-background.png';

import { HiddenCardTitle } from '../components/HiddenCardTitle';
import { DefaultLinkBlock, ImageLinkBlock } from '../components/LinkBlock';

const generateBlockAnimation = (delay: number) => ({
  variants: {
    hidden: { opacity: 0, x: 64 },
    show: { opacity: 1, x: 0 },
  },
  transition: {
    ease: 'easeInOut',
    duration: 0.4,
    delay,
  },
  initial: 'hidden',
  whileInView: 'show',
});

const generateImageAnimation = (delay: number) => ({
  variants: {
    hidden: { opacity: 0, y: 80 },
    show: { opacity: 1, y: 0 },
  },
  transition: {
    ease: 'linear',
    duration: 0.2,
    delay,
  },
  initial: 'hidden',
  whileInView: 'show',
});

export const LinkInBioCard: React.FC = () => {
  const { i18n } = useTranslation('common');
  const currentLanguage = i18n.resolvedLanguage || i18n.language || 'en';

  return (
    <Wrapper>
      <Card>
        <Image
          alt=""
          src={background}
          sizes="800px"
          style={{ width: '100%', height: '100%', borderRadius: 48 }}
        />

        <Content>
          {currentLanguage === 'en' && (
            <>
              <CardTitleEN />
              <HiddenCardTitle>Most Advanced Link in Bio</HiddenCardTitle>
            </>
          )}
          {currentLanguage === 'ko' && (
            <CardTitleKO>
              최고의 <br />
              프로필 링크
            </CardTitleKO>
          )}

          <LinkBlocksContainer>
            <DefaultLinkBlock
              title="Where I get my clothes!"
              description="I love this store, they have the best clothes!"
              style={{ position: 'absolute', top: 142, left: -48 }}
              {...generateBlockAnimation(0.4)}
            />
            <DefaultLinkBlock
              title="Where I get my clothes!"
              description="I love this store, they have the best clothes!"
              style={{ position: 'absolute', top: 236, left: -24 }}
              {...generateBlockAnimation(0.6)}
            />
            <ImageLinkBlock
              title="Shop in NYC"
              description="Random"
              style={{ position: 'absolute', top: 198, left: 164 }}
              {...generateBlockAnimation(0.8)}
            />
          </LinkBlocksContainer>

          <Content style={{ overflow: 'hidden' }}>
            <ImageTwoWrapper {...generateImageAnimation(0.3)}>
              <ImageTwo alt="" src={illustTwo} />
            </ImageTwoWrapper>
            <ImageOneWrapper {...generateImageAnimation(0)}>
              <ImageOne alt="" src={illustOne} />
            </ImageOneWrapper>
          </Content>
        </Content>
      </Card>
    </Wrapper>
  );
};

const Wrapper = styled.div`
  width: 100%;
  height: 100%;
  flex: 1;

  @media (max-width: 735px) {
    width: 100%;
    margin: 0 auto;
    max-width: 500px;

    &,
    & > div {
      min-height: 680px;
      height: 680px;
    }
  }

  @media (max-width: 480px) {
    &,
    & > div {
      min-height: 380px;
      height: 380px;
    }
  }
`;
const Card = styled.div`
  width: 100%;
  height: 100%;

  background: linear-gradient(172.69deg, #9a4133 16.94%, #c8453c 94.32%);
  border-radius: 48px;
  position: relative;
  filter: saturate(120%);
`;

const LinkBlocksContainer = styled.div`
  @media (max-width: 480px) {
    display: none;
  }
`;

const Content = styled.div`
  padding: 32px;
  display: flex;
  flex-direction: column;

  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
`;
const _CardTitleEN: React.FC<React.SVGProps<SVGSVGElement>> = (props) => (
  <svg
    width="249"
    height="85"
    viewBox="0 0 249 85"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    {...props}
  >
    <path
      d="M29.088 2.016V10.464H20.064V36H9.408V10.464H0.48V2.016H29.088ZM50.9381 8.736C54.0421 8.736 56.4581 9.776 58.1861 11.856C59.9461 13.936 60.8261 16.752 60.8261 20.304V36H50.2181V21.648C50.2181 20.368 49.8661 19.36 49.1621 18.624C48.4901 17.856 47.5781 17.472 46.4261 17.472C45.2421 17.472 44.3141 17.856 43.6421 18.624C42.9701 19.36 42.6341 20.368 42.6341 21.648V36H31.9781V0.48H42.6341V13.056C43.4661 11.776 44.5701 10.736 45.9461 9.936C47.3541 9.136 49.0181 8.736 50.9381 8.736ZM91.6549 22.224C91.6549 22.96 91.6069 23.664 91.5109 24.336H74.3749C74.5349 26.672 75.5109 27.84 77.3029 27.84C78.4549 27.84 79.2869 27.312 79.7989 26.256H91.0789C90.6949 28.176 89.8789 29.904 88.6309 31.44C87.4149 32.944 85.8629 34.144 83.9749 35.04C82.1189 35.904 80.0709 36.336 77.8309 36.336C75.1429 36.336 72.7429 35.776 70.6309 34.656C68.5509 33.536 66.9189 31.936 65.7349 29.856C64.5829 27.744 64.0069 25.28 64.0069 22.464C64.0069 19.648 64.5829 17.2 65.7349 15.12C66.9189 13.008 68.5509 11.392 70.6309 10.272C72.7429 9.152 75.1429 8.592 77.8309 8.592C80.5189 8.592 82.9029 9.152 84.9829 10.272C87.0949 11.36 88.7269 12.928 89.8789 14.976C91.0629 17.024 91.6549 19.44 91.6549 22.224ZM80.8549 19.68C80.8549 18.784 80.5669 18.112 79.9909 17.664C79.4149 17.184 78.6949 16.944 77.8309 16.944C75.9429 16.944 74.8389 17.856 74.5189 19.68H80.8549ZM125.933 18.576C127.981 19.056 129.565 20.048 130.685 21.552C131.837 23.024 132.413 24.736 132.413 26.688C132.413 29.664 131.421 31.968 129.437 33.6C127.485 35.2 124.669 36 120.989 36H103.181V2.016H120.509C123.965 2.016 126.685 2.768 128.669 4.272C130.653 5.776 131.645 7.968 131.645 10.848C131.645 12.832 131.117 14.512 130.061 15.888C129.037 17.232 127.661 18.128 125.933 18.576ZM113.837 15.264H117.965C118.925 15.264 119.629 15.072 120.077 14.688C120.557 14.304 120.797 13.712 120.797 12.912C120.797 12.08 120.557 11.472 120.077 11.088C119.629 10.672 118.925 10.464 117.965 10.464H113.837V15.264ZM118.685 27.456C119.645 27.456 120.349 27.28 120.797 26.928C121.277 26.544 121.517 25.936 121.517 25.104C121.517 23.472 120.573 22.656 118.685 22.656H113.837V27.456H118.685ZM162.202 22.224C162.202 22.96 162.154 23.664 162.058 24.336H144.922C145.082 26.672 146.058 27.84 147.85 27.84C149.002 27.84 149.834 27.312 150.346 26.256H161.626C161.242 28.176 160.426 29.904 159.178 31.44C157.962 32.944 156.41 34.144 154.522 35.04C152.666 35.904 150.618 36.336 148.378 36.336C145.69 36.336 143.29 35.776 141.178 34.656C139.098 33.536 137.466 31.936 136.282 29.856C135.13 27.744 134.554 25.28 134.554 22.464C134.554 19.648 135.13 17.2 136.282 15.12C137.466 13.008 139.098 11.392 141.178 10.272C143.29 9.152 145.69 8.592 148.378 8.592C151.066 8.592 153.45 9.152 155.53 10.272C157.642 11.36 159.274 12.928 160.426 14.976C161.61 17.024 162.202 19.44 162.202 22.224ZM151.402 19.68C151.402 18.784 151.114 18.112 150.538 17.664C149.962 17.184 149.242 16.944 148.378 16.944C146.49 16.944 145.386 17.856 145.066 19.68H151.402ZM177.62 36.336C175.06 36.336 172.788 35.92 170.804 35.088C168.852 34.256 167.3 33.104 166.148 31.632C164.996 30.16 164.34 28.496 164.18 26.64H174.404C174.532 27.44 174.868 28.032 175.412 28.416C175.988 28.8 176.708 28.992 177.572 28.992C178.116 28.992 178.548 28.88 178.868 28.656C179.188 28.4 179.348 28.096 179.348 27.744C179.348 27.136 179.012 26.704 178.34 26.448C177.668 26.192 176.532 25.904 174.932 25.584C172.98 25.2 171.364 24.784 170.084 24.336C168.836 23.888 167.732 23.12 166.772 22.032C165.844 20.944 165.38 19.44 165.38 17.52C165.38 15.856 165.812 14.352 166.676 13.008C167.572 11.632 168.884 10.56 170.612 9.792C172.34 8.992 174.436 8.592 176.9 8.592C180.548 8.592 183.396 9.488 185.444 11.28C187.524 13.072 188.772 15.408 189.188 18.288H179.732C179.572 17.552 179.236 16.992 178.724 16.608C178.212 16.192 177.524 15.984 176.66 15.984C176.116 15.984 175.7 16.096 175.412 16.32C175.124 16.512 174.98 16.816 174.98 17.232C174.98 17.776 175.316 18.192 175.988 18.48C176.66 18.736 177.732 19.008 179.204 19.296C181.156 19.68 182.804 20.112 184.148 20.592C185.492 21.072 186.66 21.904 187.652 23.088C188.644 24.24 189.14 25.84 189.14 27.888C189.14 29.488 188.676 30.928 187.748 32.208C186.82 33.488 185.476 34.496 183.716 35.232C181.988 35.968 179.956 36.336 177.62 36.336ZM210.217 26.928V36H206.185C198.761 36 195.049 32.304 195.049 24.912V17.808H191.689V8.928H195.049V2.4H205.705V8.928H210.121V17.808H205.705V25.104C205.705 25.744 205.849 26.208 206.137 26.496C206.457 26.784 206.969 26.928 207.673 26.928H210.217ZM13.056 75.936H23.328V84H2.4V50.016H13.056V75.936ZM32.0573 54.768C30.2013 54.768 28.7133 54.272 27.5933 53.28C26.4733 52.288 25.9133 51.04 25.9133 49.536C25.9133 48 26.4733 46.736 27.5933 45.744C28.7133 44.72 30.2013 44.208 32.0573 44.208C33.8813 44.208 35.3533 44.72 36.4733 45.744C37.5933 46.736 38.1533 48 38.1533 49.536C38.1533 51.04 37.5933 52.288 36.4733 53.28C35.3533 54.272 33.8813 54.768 32.0573 54.768ZM37.3373 56.928V84H26.6813V56.928H37.3373ZM61.11 56.736C64.214 56.736 66.63 57.776 68.358 59.856C70.118 61.936 70.998 64.752 70.998 68.304V84H60.39V69.648C60.39 68.368 60.038 67.36 59.334 66.624C58.662 65.856 57.75 65.472 56.598 65.472C55.414 65.472 54.486 65.856 53.814 66.624C53.142 67.36 52.806 68.368 52.806 69.648V84H42.15V56.928H52.806V61.056C53.638 59.776 54.742 58.736 56.118 57.936C57.526 57.136 59.19 56.736 61.11 56.736ZM92.9468 84L86.2748 73.2V84H75.6188V48.48H86.2748V67.056L93.0428 56.928H105.427L95.2988 70.56L105.667 84H92.9468ZM121.589 54.768C119.733 54.768 118.245 54.272 117.125 53.28C116.005 52.288 115.445 51.04 115.445 49.536C115.445 48 116.005 46.736 117.125 45.744C118.245 44.72 119.733 44.208 121.589 44.208C123.413 44.208 124.885 44.72 126.005 45.744C127.125 46.736 127.685 48 127.685 49.536C127.685 51.04 127.125 52.288 126.005 53.28C124.885 54.272 123.413 54.768 121.589 54.768ZM126.869 56.928V84H116.213V56.928H126.869ZM150.641 56.736C153.745 56.736 156.161 57.776 157.889 59.856C159.649 61.936 160.529 64.752 160.529 68.304V84H149.921V69.648C149.921 68.368 149.569 67.36 148.865 66.624C148.193 65.856 147.281 65.472 146.129 65.472C144.945 65.472 144.017 65.856 143.345 66.624C142.673 67.36 142.337 68.368 142.337 69.648V84H131.681V56.928H142.337V61.056C143.169 59.776 144.273 58.736 145.649 57.936C147.057 57.136 148.721 56.736 150.641 56.736ZM196.058 66.576C198.106 67.056 199.69 68.048 200.81 69.552C201.962 71.024 202.538 72.736 202.538 74.688C202.538 77.664 201.546 79.968 199.562 81.6C197.61 83.2 194.794 84 191.114 84H173.306V50.016H190.634C194.09 50.016 196.81 50.768 198.794 52.272C200.778 53.776 201.77 55.968 201.77 58.848C201.77 60.832 201.242 62.512 200.186 63.888C199.162 65.232 197.786 66.128 196.058 66.576ZM183.962 63.264H188.09C189.05 63.264 189.754 63.072 190.202 62.688C190.682 62.304 190.922 61.712 190.922 60.912C190.922 60.08 190.682 59.472 190.202 59.088C189.754 58.672 189.05 58.464 188.09 58.464H183.962V63.264ZM188.81 75.456C189.77 75.456 190.474 75.28 190.922 74.928C191.402 74.544 191.642 73.936 191.642 73.104C191.642 71.472 190.698 70.656 188.81 70.656H183.962V75.456H188.81ZM211.495 54.768C209.639 54.768 208.151 54.272 207.031 53.28C205.911 52.288 205.351 51.04 205.351 49.536C205.351 48 205.911 46.736 207.031 45.744C208.151 44.72 209.639 44.208 211.495 44.208C213.319 44.208 214.791 44.72 215.911 45.744C217.031 46.736 217.591 48 217.591 49.536C217.591 51.04 217.031 52.288 215.911 53.28C214.791 54.272 213.319 54.768 211.495 54.768ZM216.775 56.928V84H206.119V56.928H216.775ZM234.452 84.336C231.732 84.336 229.284 83.776 227.108 82.656C224.932 81.536 223.22 79.936 221.972 77.856C220.756 75.744 220.148 73.28 220.148 70.464C220.148 67.648 220.756 65.2 221.972 63.12C223.22 61.008 224.932 59.392 227.108 58.272C229.284 57.152 231.732 56.592 234.452 56.592C237.172 56.592 239.62 57.152 241.796 58.272C243.972 59.392 245.668 61.008 246.884 63.12C248.132 65.2 248.756 67.648 248.756 70.464C248.756 73.28 248.132 75.744 246.884 77.856C245.668 79.936 243.972 81.536 241.796 82.656C239.62 83.776 237.172 84.336 234.452 84.336ZM234.452 75.12C235.444 75.12 236.276 74.736 236.948 73.968C237.62 73.168 237.956 72 237.956 70.464C237.956 68.928 237.62 67.776 236.948 67.008C236.276 66.208 235.444 65.808 234.452 65.808C233.46 65.808 232.628 66.208 231.956 67.008C231.284 67.776 230.948 68.928 230.948 70.464C230.948 72 231.268 73.168 231.908 73.968C232.58 74.736 233.428 75.12 234.452 75.12Z"
      fill="#E73E67"
    />
  </svg>
);
const CardTitleEN = styled(_CardTitleEN)`
  @media (max-width: 1268px) {
    transform: scale(0.85);
    transform-origin: top left;
  }

  @media (max-width: 480px) {
    transform: scale(0.8);
  }
`;
const CardTitleKO = styled.h3`
  font-weight: 900;
  font-size: 48px;
  line-height: 100%;
  color: #e73e67;

  @media (max-width: 1268px) {
    font-size: 40px;
  }
`;

const ImageOneWrapper = styled(motion.div)`
  position: absolute;
  right: 240px;
  bottom: -2px;

  @media (max-width: 735px) {
    right: 180px;
  }

  @media (max-width: 480px) {
    right: 100px;
  }
`;
const ImageOne = styled(Image)`
  width: 286px;
  height: 398px;
  object-fit: contain;
  object-position: bottom;

  @media (max-width: 480px) {
    width: 180px;
    height: unset;
  }
`;
const ImageTwoWrapper = styled(motion.div)`
  position: absolute;
  right: 30px;
  bottom: -2px;

  @media (max-width: 735px) {
    right: 16px;
  }

  @media (max-width: 480px) {
    right: -32px;
  }
`;
const ImageTwo = styled(Image)`
  width: 286px;
  object-fit: contain;
  object-position: bottom;

  @media (max-width: 480px) {
    width: 180px;
  }
`;
